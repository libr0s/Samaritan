{"version":3,"sources":["../source/FileUpload.js"],"names":["PureComponent","Component","FileUpload","onFileSelect","event","props","onChange","multiple","action","Error","value","target","files","onClick","disabled","preventDefault","fileInput","click","onKeyDown","ctrlKey","altKey","shiftKey","metaKey","keyCode","storeFileInputNode","node","required","error","dropTarget","draggedOver","tabIndex","style","className","children","undefined","HIDDEN","propTypes","func","bool","isRequired","string","number","object","defaultProps","element","display"],"mappings":"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","file":"FileUpload.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\nimport { submitFormOnCtrlEnter } from './utility/dom'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\nexport default class FileUpload extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// On file(s) chosen.\r\n\t\tonChange  : PropTypes.func,\r\n\r\n\t\t// (deprecated, use `onChange` instead).\r\n\t\t// On file(s) chosen.\r\n\t\taction    : PropTypes.func,\r\n\r\n\t\t// Allows choosing multiple files if `true`.\r\n\t\tmultiple  : PropTypes.bool,\r\n\r\n\t\t// Disables the file input.\r\n\t\tdisabled  : PropTypes.bool,\r\n\r\n\t\t// `onClick` handler.\r\n\t\tonClick   : PropTypes.func,\r\n\r\n\t\t// `react-dnd` `dropTarget()`.\r\n\t\tdropTarget : PropTypes.func.isRequired,\r\n\r\n\t\t// `react-dnd` `draggedOver`.\r\n\t\tdraggedOver : PropTypes.bool.isRequired,\r\n\r\n\t\t// `react-dnd` `canDrop()`.\r\n\t\t// canDrop : PropTypes.bool.isRequired,\r\n\r\n\t\t// Whether choosing a file is required.\r\n\t\trequired : PropTypes.bool,\r\n\r\n\t\t// Renders an error message below the `<input/>`.\r\n\t\terror     : PropTypes.string,\r\n\r\n\t\ttabIndex  : PropTypes.number.isRequired,\r\n\r\n\t\t// The clickable area, like \"Click here to choose a file\".\r\n\t\tchildren  : PropTypes.node,\r\n\r\n\t\t// CSS class\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle     : PropTypes.object\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\tdropTarget  : element => element,\r\n\t\tdraggedOver : false,\r\n\t\ttabIndex : 0\r\n\t}\r\n\r\n\tonFileSelect = (event) =>\r\n\t{\r\n\t\tlet { onChange, multiple } = this.props\r\n\r\n\t\t// `action` property is deprecated.\r\n\t\tonChange = onChange || this.props.action\r\n\r\n\t\t// This check will be replaced with `onChange : PropTypes.func.isRequired`\r\n\t\t// when `action` property is removed in some next breaking release.\r\n\t\tif (!onChange) {\r\n\t\t\tthrow new Error(`\"onChange\" handler not passed.`)\r\n\t\t}\r\n\r\n\t\tconst value = event.target.files\r\n\t\tonChange(multiple ? value : value[0])\r\n\r\n\t\t// Reset the selected file\r\n\t\t// so that `onChange` is triggered again next time\r\n\t\t// even if the user selects the same file.\r\n\t\tevent.target.value = null\r\n\t}\r\n\r\n\tonClick = (event) =>\r\n\t{\r\n\t\tconst { disabled, onClick } = this.props\r\n\r\n\t\tif (disabled && event) {\r\n\t\t\treturn event.preventDefault()\r\n\t\t}\r\n\r\n\t\tif (onClick) {\r\n\t\t\tonClick()\r\n\t\t}\r\n\r\n\t\t// This is why `onClick` is set on the `<input/>`.\r\n\t\tthis.fileInput.click()\r\n\t}\r\n\r\n\tonKeyDown = (event) => {\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tswitch (event.keyCode) {\r\n\t\t\t// \"Enter\".\r\n\t\t\tcase 13:\r\n\t\t\t// Spacebar.\r\n\t\t\tcase 32:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\t// Emulate `:active` on key press.\r\n\t\t\t\t// setTimeout(() => {\r\n\t\t\t\t// \tif (this._isMounted) {\r\n\t\t\t\t// \t\tthis.setState({\r\n\t\t\t\t// \t\t\tisActive: true\r\n\t\t\t\t// \t\t})\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\t\t\t\treturn this.onClick()\r\n\t\t}\r\n\t}\r\n\r\n\tstoreFileInputNode = (node) => this.fileInput = node\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\trequired,\r\n\t\t\terror,\r\n\t\t\tdisabled,\r\n\t\t\tdropTarget,\r\n\t\t\tdraggedOver,\r\n\t\t\t// canDrop,\r\n\t\t\ttabIndex,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\tclassName={ classNames('rrui__file-upload', className) }>\r\n\r\n\t\t\t\t{/* Hidden. */}\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\tref={ this.storeFileInputNode }\r\n\t\t\t\t\tonClick={ this.onClick }\r\n\t\t\t\t\tonChange={ this.onFileSelect }\r\n\t\t\t\t\tdisabled={ disabled }\r\n\t\t\t\t\taria-label={ this.props['aria-label'] }\r\n\t\t\t\t\taria-required={ required ? true : undefined }\r\n\t\t\t\t\taria-invalid={ error ? true : undefined }\r\n\t\t\t\t\tstyle={ HIDDEN }/>\r\n\r\n\t\t\t\t{/* The actual clickable area. */}\r\n\t\t\t\t{ dropTarget(\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\ttabIndex={ tabIndex }\r\n\t\t\t\t\t\trole=\"button\"\r\n\t\t\t\t\t\taria-label={ this.props['aria-label'] }\r\n\t\t\t\t\t\tonClick={ this.onClick }\r\n\t\t\t\t\t\tonKeyDown={ this.onKeyDown }\r\n\t\t\t\t\t\tclassName={ classNames(\r\n\t\t\t\t\t\t\t/* Developers should define `:focus` styles for `<FileUpload/>`s. */\r\n\t\t\t\t\t\t\t'rrui__outline',\r\n\t\t\t\t\t\t\t'rrui__file-upload__area',\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t'rrui__file-upload__area--disabled' : disabled,\r\n\t\t\t\t\t\t\t\t'rrui__file-upload__area--invalid' : error,\r\n\t\t\t\t\t\t\t\t'rrui__file-upload__area--dragged-over' : draggedOver,\r\n\t\t\t\t\t\t\t\t// 'rrui__file-upload__area--can-not-drop' : !canDrop\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t) }>\r\n\r\n\t\t\t\t\t\t{/* Could be an \"UPLOAD\" button or something. */}\r\n\t\t\t\t\t\t{ children }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\r\n\t\t\t\t{/* Error message (e.g. \"Required\"). */}\r\n\t\t\t\t{ error &&\r\n\t\t\t\t\t<div className=\"rrui__input-error\">\r\n\t\t\t\t\t\t{ error }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst HIDDEN =\r\n{\r\n\tdisplay: 'none'\r\n}"]}