{"version":3,"sources":["../source/List.js"],"names":["findItemIndexByValue","PureComponent","Component","DividerType","type","List","state","items","props","itemRefs","input","getFocusedItemIndex","focusedItemIndex","clearFocus","focusItem","unfocus","focus","undefined","list","options","onFocusItem","shouldFocus","setState","focusedItemValue","getItemValue","_isMounted","console","error","onKeyDown","event","children","defaultPrevented","ctrlKey","altKey","shiftKey","metaKey","Children","count","keyCode","preventDefault","previousIndex","getPreviousFocusableItemIndex","interaction","nextIndex","getNextFocusableItemIndex","onKeyPress","resetInputTimeout","characters","char","String","fromCharCode","charCode","trim","onInput","clearTimeout","resetInputTimer","setTimeout","resetInput","onItemFocus","expandable","onFocusIn","onBlur","blurTimer","result","onFocusOut","isFocused","value","isFocusableItemIndex","index","isFocusableItem","item","storeListNode","node","storeItemRef","ref","i","highlightFirstItem","prevProps","prevState","highlightSelectedItem","selectedItemIndex","itemRef","click","length","toArray","findItemIndexByLabel","id","disabled","tabbable","hasOnChange","onChange","onSelectItem","createButtons","className","style","role","map","ItemType","Error","cloneElement","key","focused","tabIndex","createButton","onItemBlur","hasOnSelectItem","selectedItemValue","propTypes","string","any","func","bool","arrayOf","object","isRequired","number","defaultProps","Item","onMouseDown","shouldCreateButton","isSelectable","onFocus","onClick","onSelect","storeRef","isSelectableItem","icon","isSelected","properties","ItemComponent","itemChildren","label","getItemLabel","unshift","createElement","haveItemsChanged","prevItems","itemLabel","toLowerCase","indexOf"],"mappings":"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","file":"List.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\nimport Divider from './Divider'\r\n\r\nimport { submitFormOnCtrlEnter } from './utility/dom'\r\nimport { onBlur, focus } from './utility/focus'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\n// Workaround for `react-hot-loader`.\r\n// https://github.com/gaearon/react-hot-loader#checking-element-types\r\nconst DividerType = <Divider/>.type\r\n\r\nexport default class List extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// (optional) HTML `id` attribute.\r\n\t\t// Can be used for WAI-ARIA stuff.\r\n\t\t// Example: `<input role=\"combobox\"/>` with `aria-owns={listId}`.\r\n\t\tid : PropTypes.string,\r\n\r\n\t\tvalue : PropTypes.any,\r\n\t\tonChange : PropTypes.func,\r\n\r\n\t\t// If a `<List/>` has `onChange` then it wraps `<List.Item/>`s with `<button/>`s.\r\n\t\t// The `onChange` added by `<ExpandableList/>` overrides the original `onChange`.\r\n\t\t// If there was no `onChange` — there will be one.\r\n\t\t// So to retain that info `hasOnChange` property is used as a workaround.\r\n\t\t// `undefined` means \"ignore this property\".\r\n\t\thasOnChange : PropTypes.bool,\r\n\r\n\t\t// If `items` property is supplied then it's used to\r\n\t\t// detect \"on items changed\" event in `getDerivedStateFromProps`.\r\n\t\t// It seems to be the only usage of the `items` property.\r\n\t\titems : PropTypes.arrayOf(PropTypes.object),\r\n\r\n\t\t// Legacy method, use `onChange` instead.\r\n\t\tonSelectItem : PropTypes.func,\r\n\t\thighlightSelectedItem : PropTypes.bool.isRequired,\r\n\r\n\t\tonFocusIn : PropTypes.func,\r\n\t\tonFocusItem : PropTypes.func,\r\n\t\tonKeyDown : PropTypes.func,\r\n\r\n\t\t// ARIA `role` attribute.\r\n\t\trole : PropTypes.string,\r\n\r\n\t\t// If a `<List/>` is `expandable`\r\n\t\t// then it won't be `.rrui__list:not(.rrui__list--focus)`.\r\n\t\t// `.rrui__list:not(.rrui__list--focus)` is only for standalone lists.\r\n\t\texpandable : PropTypes.bool,\r\n\r\n\t\ttabbable : PropTypes.bool.isRequired,\r\n\t\tshouldFocus : PropTypes.bool.isRequired,\r\n\t\thighlightFirstItem : PropTypes.bool.isRequired,\r\n\t\tcreateButtons : PropTypes.bool.isRequired,\r\n\r\n\t\t// For select options list keyboard navigation via typing.\r\n\t\tresetInputTimeout : PropTypes.number.isRequired\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\ttabbable : true,\r\n\t\tshouldFocus : true,\r\n\t\thighlightFirstItem : false,\r\n\t\tcreateButtons : true,\r\n\t\thighlightSelectedItem : true,\r\n\t\tresetInputTimeout : 1000\r\n\t}\r\n\r\n\tstate = {\r\n\t\titems: this.props.items\r\n\t}\r\n\r\n\t// `ref`s of all items currently rendered.\r\n\titemRefs = []\r\n\r\n\t// For select options list keyboard navigation via typing.\r\n\tinput = ''\r\n\r\n\tcomponentDidMount()\r\n\t{\r\n\t\tconst {\r\n\t\t\thighlightFirstItem\r\n\t\t} = this.props\r\n\r\n\t\tif (highlightFirstItem) {\r\n\t\t\tthis.focusItem(0)\r\n\t\t}\r\n\r\n\t\tthis._isMounted = true\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState)\r\n\t{\r\n\t\tconst {\r\n\t\t\tvalue,\r\n\t\t\titems,\r\n\t\t\tchildren,\r\n\t\t\thighlightSelectedItem,\r\n\t\t\thighlightFirstItem\r\n\t\t} = this.props\r\n\r\n\t\t// If `items` property is supplied\r\n\t\t// then it's used to detect \"on items changed\" event.\r\n\t\tif (prevState.items && prevState.items !== items)\r\n\t\t{\r\n\t\t\tthis.setState({ items })\r\n\t\t\t// `findItemIndexByValue()` must return `undefined` for \"no such item\".\r\n\t\t\tconst selectedItemIndex = highlightSelectedItem ? findItemIndexByValue(value, children) : undefined\r\n\t\t\tthis.focusItem(selectedItemIndex === undefined ? (highlightFirstItem ? 0 : undefined) : selectedItemIndex)\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tthis._isMounted = false\r\n\t\tclearTimeout(this.blurTimer)\r\n\t\tclearTimeout(this.resetInputTimer)\r\n\t}\r\n\r\n\tchooseFocusedItem() {\r\n\t\tconst { focusedItemIndex } = this.state\r\n\t\tif (focusedItemIndex !== undefined) {\r\n\t\t\tconst itemRef = this.itemRefs[focusedItemIndex]\r\n\t\t\tif (itemRef.click) {\r\n\t\t\t\titemRef.click()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetFocusedItemIndex = () => this.state.focusedItemIndex\r\n\tclearFocus = () => this.focusItem()\r\n\t// Deprecated method name.\r\n\tunfocus = this.clearFocus\r\n\r\n\t// Focuses the list.\r\n\tfocus = () => {\r\n\t\tconst { focusedItemIndex } = this.state\r\n\t\tif (focusedItemIndex !== undefined) {\r\n\t\t\treturn this.focusItem(focusedItemIndex)\r\n\t\t}\r\n\t\t// // Focus the first focusable list item.\r\n\t\t// this.focusItem(this.getFirstFocusableItemIndex())\r\n\t\tthis.list.focus()\r\n\t}\r\n\r\n\tgetFirstFocusableItemIndex()\r\n\t{\r\n\t\tlet i = 0\r\n\t\twhile (i < this.itemRefs.length) {\r\n\t\t\tif (this.itemRefs[i]) {\r\n\t\t\t\treturn i\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetItemValue(index)\r\n\t{\r\n\t\tconst { children } = this.props\r\n\t\tconst item = React.Children.toArray(children)[index]\r\n\t\treturn item.props.value\r\n\t}\r\n\r\n\t// Can be public API for programmatically focusing a certain `<List.Item/>`.\r\n\tfocusItem = (focusedItemIndex, options = {}) =>\r\n\t{\r\n\t\tconst { onFocusItem, shouldFocus } = this.props\r\n\r\n\t\tif (onFocusItem) {\r\n\t\t\tonFocusItem(focusedItemIndex, options)\r\n\t\t}\r\n\r\n\t\tthis.setState({\r\n\t\t\t// Focus the item.\r\n\t\t\tfocusedItemIndex,\r\n\t\t\t// Store the focused item value.\r\n\t\t\t// This is used for cases like autocomplete\r\n\t\t\t// where the list of options changes but\r\n\t\t\t// the focused option stays focused.\r\n\t\t\tfocusedItemValue: focusedItemIndex === undefined ? undefined : this.getItemValue(focusedItemIndex)\r\n\t\t}, () => {\r\n\t\t\t// Actually focus the item.\r\n\t\t\tif (focusedItemIndex !== undefined) {\r\n\t\t\t\tif (shouldFocus && this._isMounted) {\r\n\t\t\t\t\tif (!focus(this.itemRefs[focusedItemIndex])) {\r\n\t\t\t\t\t\tconsole.error(`<List.Item/> #${focusedItemIndex + 1}'s child component doesn't have a \".focus()\" method.`)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tonKeyDown = (event) =>\r\n\t{\r\n\t\tconst { onKeyDown, children } = this.props\r\n\t\tconst { focusedItemIndex } = this.state\r\n\r\n\t\tif (onKeyDown) {\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (submitFormOnCtrlEnter(event, this.input)) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (React.Children.count(children) > 0)\r\n\t\t{\r\n\t\t\tswitch (event.keyCode)\r\n\t\t\t{\r\n\t\t\t\t// \"Up\" arrow.\r\n\t\t\t\t// Select the previous item (if present).\r\n\t\t\t\tcase 38:\r\n\t\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\t\tconst previousIndex = this.getPreviousFocusableItemIndex()\r\n\r\n\t\t\t\t\tif (previousIndex !== undefined) {\r\n\t\t\t\t\t\tthis.focusItem(previousIndex, { interaction: true })\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn\r\n\r\n\t\t\t\t// \"Down\" arrow.\r\n\t\t\t\t// Select the next item (if present).\r\n\t\t\t\tcase 40:\r\n\t\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\t\tconst nextIndex = this.getNextFocusableItemIndex()\r\n\r\n\t\t\t\t\tif (nextIndex !== undefined) {\r\n\t\t\t\t\t\tthis.focusItem(nextIndex, { interaction: true })\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonKeyPress = (event) => {\r\n\t\tconst { resetInputTimeout } = this.props\r\n\t\tconst characters = event.char || String.fromCharCode(event.charCode)\r\n\t\tif (characters.trim()) {\r\n\t\t\tthis.input += characters\r\n\t\t\tthis.onInput()\r\n\t\t\tclearTimeout(this.resetInputTimer)\r\n\t\t\tthis.resetInputTimer = setTimeout(this.resetInput, resetInputTimeout)\r\n\t\t}\r\n\t}\r\n\r\n\tonInput() {\r\n\t\tconst { children } = this.props\r\n\t\tconst index = findItemIndexByLabel(this.input, children)\r\n\t\tif (index !== undefined) {\r\n\t\t\tthis.focusItem(index)\r\n\t\t}\r\n\t}\r\n\r\n\tresetInput = () => this.input = ''\r\n\r\n\t// Get the previous option (relative to the currently focused option)\r\n\tgetPreviousFocusableItemIndex()\r\n\t{\r\n\t\tconst { children } = this.props\r\n\t\tlet { focusedItemIndex } = this.state\r\n\r\n\t\tif (focusedItemIndex === undefined) {\r\n\t\t\tfocusedItemIndex = React.Children.count(children)\r\n\t\t}\r\n\r\n\t\twhile (focusedItemIndex > 0) {\r\n\t\t\tfocusedItemIndex--\r\n\t\t\tif (this.isFocusableItemIndex(focusedItemIndex)) {\r\n\t\t\t\treturn focusedItemIndex\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Get the next option (relative to the currently focused option)\r\n\tgetNextFocusableItemIndex()\r\n\t{\r\n\t\tconst { children } = this.props\r\n\t\tlet { focusedItemIndex } = this.state\r\n\r\n\t\tif (focusedItemIndex === undefined) {\r\n\t\t\tfocusedItemIndex = -1\r\n\t\t}\r\n\r\n\t\twhile (focusedItemIndex < React.Children.count(children) - 1) {\r\n\t\t\tfocusedItemIndex++\r\n\t\t\tif (this.isFocusableItemIndex(focusedItemIndex)) {\r\n\t\t\t\treturn focusedItemIndex\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonItemFocus = (event) => {\r\n\t\tconst { expandable } = this.props\r\n\t\tif (expandable) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tthis.onFocusIn()\r\n\t}\r\n\r\n\tonBlur = (event) => {\r\n\t\tconst { expandable } = this.props\r\n\t\tif (expandable) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tclearTimeout(this.blurTimer)\r\n\t\tconst result = onBlur(event, this.onFocusOut, () => this.list)\r\n\t\tif (typeof result === 'number') {\r\n\t\t\tthis.blurTimer = result\r\n\t\t}\r\n\t}\r\n\r\n\tonFocusIn = () => {\r\n\t\tconst { onFocusIn } = this.props\r\n\t\tif (onFocusIn) {\r\n\t\t\tonFocusIn()\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tisFocused: true\r\n\t\t})\r\n\t}\r\n\r\n\tonFocusOut = () => {\r\n\t\tconst { value } = this.props\r\n\t\tif (value === undefined) {\r\n\t\t\tthis.clearFocus()\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tisFocused: false\r\n\t\t})\r\n\t}\r\n\r\n\tisFocusableItemIndex = (index) => this.itemRefs[index] !== undefined\r\n\r\n\tisFocusableItem = (item) => item.type !== DividerType\r\n\r\n\t// `this.list` is also being accessed from `<ScrollableList/>`.\r\n\tstoreListNode = (node) => this.list = node\r\n\r\n\tstoreItemRef = (ref, i) => this.itemRefs[i] = ref\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tid,\r\n\t\t\texpandable,\r\n\t\t\tdisabled,\r\n\t\t\ttabbable,\r\n\t\t\tvalue,\r\n\t\t\thasOnChange,\r\n\t\t\tonChange,\r\n\t\t\t// `onSelectItem` is deprecated, use `onChange` instead.\r\n\t\t\tonSelectItem,\r\n\t\t\thighlightSelectedItem,\r\n\t\t\tcreateButtons,\r\n\t\t\tclassName,\r\n\t\t\tstyle,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tlet { role } = this.props\r\n\r\n\t\tconst {\r\n\t\t\tfocusedItemIndex,\r\n\t\t\tisFocused\r\n\t\t} = this.state\r\n\r\n\t\t// ARIA (accessibility) roles info:\r\n\t\t// https://www.w3.org/TR/wai-aria-practices/examples/listbox/listbox-collapsible.html\r\n\t\tif (!role && (onChange || onSelectItem)) {\r\n\t\t\trole = 'listbox'\r\n\t\t}\r\n\r\n\t\t// if (this.props['aria-hidden']) {\r\n\t\t// \trole = undefined\r\n\t\t// }\r\n\r\n\t\t// `tabIndex={ -1 }` makes the `<ul/>` focusable.\r\n\t\t// So that `<Expandable/>` doesn't collapse on click inside it (top, bottom).\r\n\r\n\t\treturn (\r\n\t\t\t<ul\r\n\t\t\t\tref={ this.storeListNode }\r\n\t\t\t\tid={ id }\r\n\t\t\t\trole={ role }\r\n\t\t\t\taria-label={ this.props['aria-label'] }\r\n\t\t\t\taria-hidden={ this.props['aria-hidden'] }\r\n\t\t\t\taria-required={ this.props['aria-required'] }\r\n\t\t\t\taria-invalid={ this.props['aria-invalid'] }\r\n\t\t\t\tonFocus={ this.onFocusIn }\r\n\t\t\t\tonKeyDown={ this.onKeyDown }\r\n\t\t\t\tonKeyPress={ this.onKeyPress }\r\n\t\t\t\ttabIndex={ -1 }\r\n\t\t\t\tstyle={ style }\r\n\t\t\t\tclassName={ classNames(className, 'rrui__outline', 'rrui__list', {\r\n\t\t\t\t\t'rrui__list--focus': isFocused\r\n\t\t\t\t}) }>\r\n\r\n\t\t\t\t{ React.Children.map(children, (item, i) =>\r\n\t\t\t\t{\r\n\t\t\t\t\tif (item.type !== ItemType) {\r\n\t\t\t\t\t\tthrow new Error(`Only <List.Item/>s can be placed inside a <List/> (and remove any whitespace).`)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn React.cloneElement(item,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey       : i,\r\n\t\t\t\t\t\tindex     : i,\r\n\t\t\t\t\t\titemRef   : this.isFocusableItem(item) ? this.storeItemRef : undefined,\r\n\t\t\t\t\t\trole      : role === 'listbox' ? 'option' : item.props.role,\r\n\t\t\t\t\t\tfocus     : this.focusItem,\r\n\t\t\t\t\t\tfocused   : (expandable || isFocused) && focusedItemIndex === i,\r\n\t\t\t\t\t\tdisabled  : disabled || item.props.disabled,\r\n\t\t\t\t\t\ttabIndex  : tabbable && (focusedItemIndex === undefined ? i === 0 : i === focusedItemIndex) ? 0 : -1,\r\n\t\t\t\t\t\tcreateButton : createButtons,\r\n\t\t\t\t\t\tonItemFocus : this.onItemFocus,\r\n\t\t\t\t\t\tonItemBlur : this.onBlur,\r\n\t\t\t\t\t\tonSelectItem : onChange || onSelectItem,\r\n\t\t\t\t\t\thasOnSelectItem : hasOnChange,\r\n\t\t\t\t\t\tselectedItemValue : value,\r\n\t\t\t\t\t\thighlightSelectedItem : (onChange || onSelectItem) && highlightSelectedItem\r\n\t\t\t\t\t})\r\n\t\t\t\t}) }\r\n\t\t\t</ul>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport class Item extends React.Component\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// (optional) HTML `id` attribute.\r\n\t\t// Can be used for WAI-ARIA stuff.\r\n\t\t// Example: `<input role=\"combobox\"/>` with `aria-activedescendant={focusedListItemId}`.\r\n\t\tid : PropTypes.string,\r\n\r\n\t\tvalue : PropTypes.any,\r\n\t\tindex : PropTypes.number,\r\n\t\tfocused : PropTypes.bool,\r\n\t\tonClick : PropTypes.func,\r\n\t\t// `onSelect` is deprecated, use `onClick` instead.\r\n\t\tonSelect : PropTypes.func,\r\n\t\tonSelectItem : PropTypes.func,\r\n\t\t// If a `<List/>` has `onChange` then it wraps `<List.Item/>`s with `<button/>`s.\r\n\t\t// The `onChange` added by `<ExpandableList/>` overrides the original `onChange`.\r\n\t\t// If there was no `onChange` — there will be one.\r\n\t\t// So to retain that info `hasOnChange` property is used as a workaround.\r\n\t\t// `undefined` means \"ignore this property\".\r\n\t\thasOnSelectItem : PropTypes.bool,\r\n\t\tselectedItemValue : PropTypes.any,\r\n\t\thighlightSelectedItem : PropTypes.bool,\r\n\t\tcreateButton : PropTypes.bool,\r\n\t\t// Deprecated. Use `createButton` instead.\r\n\t\tshouldCreateButton : PropTypes.bool\r\n\t}\r\n\r\n\tonMouseDown = (event) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tvalue,\r\n\t\t\tindex,\r\n\t\t\tfocus,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// If `<List.Item/>` child element gets wrapped in a `<button/>`\r\n\t\t// then call `onMouseDown` defined on the `<List.Item/>`.\r\n\t\t// If `<List.Item/>` child element doesn't get wrapped in a `<button/>`\r\n\t\t// then manually call `onMouseDown` defined on the `<List.Item/>` child element\r\n\t\t// because `onMouseDown` gets overridden for `<List.Item/>` child element.\r\n\r\n\t\tconst onMouseDown = this.shouldCreateButton() ? this.props.onMouseDown : children.props.onMouseDown\r\n\r\n\t\t// Without this Safari (both mobile and desktop)\r\n\t\t// won't select any item in an expanded list\r\n\t\t// because it will collapse the list immediately\r\n\t\t// on `mouseDown` due to `blur` event being fired.\r\n\t\tevent.preventDefault()\r\n\r\n\t\tif (this.isSelectable()) {\r\n\t\t\tfocus(index)\r\n\t\t}\r\n\r\n\t\tif (onMouseDown) {\r\n\t\t\tonMouseDown(event)\r\n\t\t}\r\n\t}\r\n\r\n\tonFocus = (event) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tfocus,\r\n\t\t\tindex,\r\n\t\t\tonItemFocus,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// If `<List.Item/>` child element gets wrapped in a `<button/>`\r\n\t\t// then call `onFocus` defined on the `<List.Item/>`.\r\n\t\t// If `<List.Item/>` child element doesn't get wrapped in a `<button/>`\r\n\t\t// then manually call `onFocus` defined on the `<List.Item/>` child element\r\n\t\t// because `onFocus` gets overridden for `<List.Item/>` child element.\r\n\r\n\t\tconst onFocus = this.shouldCreateButton() ? this.props.onFocus : children.props.onFocus\r\n\r\n\t\tif (this.isSelectable()) {\r\n\t\t\tfocus(index)\r\n\t\t}\r\n\r\n\t\tif (onFocus) {\r\n\t\t\tonFocus(event)\r\n\t\t}\r\n\r\n\t\tif (onItemFocus) {\r\n\t\t\tonItemFocus(event)\r\n\t\t}\r\n\t}\r\n\r\n\tonBlur = (event) =>\r\n\t{\r\n\t\tconst { onItemBlur, children } = this.props\r\n\r\n\t\t// If `<List.Item/>` child element gets wrapped in a `<button/>`\r\n\t\t// then call `onBlur` defined on the `<List.Item/>`.\r\n\t\t// If `<List.Item/>` child element doesn't get wrapped in a `<button/>`\r\n\t\t// then manually call `onFocus` defined on the `<List.Item/>` child element\r\n\t\t// because `onBlur` gets overridden for `<List.Item/>` child element.\r\n\r\n\t\tconst onBlur = this.shouldCreateButton() ? this.props.onBlur : children.props.onBlur\r\n\r\n\t\tif (onBlur) {\r\n\t\t\tonBlur(event)\r\n\t\t}\r\n\r\n\t\tif (onItemBlur) {\r\n\t\t\tonItemBlur(event)\r\n\t\t}\r\n\t}\r\n\r\n\tonClick = (event) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tonClick,\r\n\t\t\tonSelect,\r\n\t\t\tonSelectItem,\r\n\t\t\tindex,\r\n\t\t\tvalue,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// If `<List.Item/>` child element gets wrapped in a `<button/>`\r\n\t\t// then call `onClick` defined on the `<List.Item/>`.\r\n\t\t// If `<List.Item/>` child element doesn't get wrapped in a `<button/>`\r\n\t\t// then manually call `onClick` defined on the `<List.Item/>` child element\r\n\t\t// because `onClick` gets overridden for `<List.Item/>` child element,\r\n\t\t// and also call `onClick` defined on the `<List.Item/>` (if any).\r\n\r\n\t\tif (onClick) {\r\n\t\t\tonClick(event)\r\n\t\t}\r\n\r\n\t\tif (!this.shouldCreateButton()) {\r\n\t\t\t// Since `onClick` gets overridden\r\n\t\t\t// for `<List.Item/>` child element\r\n\t\t\t// call its original `onClick` manually here.\r\n\t\t\tif (children.props.onClick) {\r\n\t\t\t\tchildren.props.onClick(event)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isSelectable())\r\n\t\t{\r\n\t\t\tif (onSelect) {\r\n\t\t\t\tonSelect(value, index)\r\n\t\t\t}\r\n\t\t\tif (onSelectItem) {\r\n\t\t\t\tonSelectItem(value, index)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tisSelectable()\r\n\t{\r\n\t\treturn isSelectableItem(this)\r\n\t}\r\n\r\n\t// Perhaps this is called by `focus()` utility function.\r\n\t// Something like: `focus(this.itemRefs[i])`.\r\n\tfocus = () =>\r\n\t{\r\n\t\tconst { children } = this.props\r\n\t\tfocus(React.Children.toArray(children)[0])\r\n\t}\r\n\r\n\tstoreRef = (ref) =>\r\n\t{\r\n\t\tconst { itemRef, index } = this.props\r\n\r\n\t\tif (itemRef) {\r\n\t\t\titemRef(ref, index)\r\n\t\t}\r\n\t}\r\n\r\n\tshouldCreateButton()\r\n\t{\r\n\t\tconst {\r\n\t\t\tonClick,\r\n\t\t\tonSelect,\r\n\t\t\tonSelectItem,\r\n\t\t\thasOnSelectItem,\r\n\t\t\tcreateButton,\r\n\t\t\t// Deprecated. Use `createButton` instead.\r\n\t\t\tshouldCreateButton\r\n\t\t} = this.props\r\n\r\n\t\treturn this.isSelectable() && (\r\n\t\t\tonClick ||\r\n\t\t\tonSelect ||\r\n\t\t\t(\r\n\t\t\t\tonSelectItem &&\r\n\t\t\t\t(hasOnSelectItem === undefined ? true : hasOnSelectItem) &&\r\n\t\t\t\t(createButton || shouldCreateButton)\r\n\t\t\t)\r\n\t\t)\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tid,\r\n\t\t\tvalue,\r\n\t\t\ticon,\r\n\t\t\trole,\r\n\t\t\tfocused,\r\n\t\t\tdisabled,\r\n\t\t\tclassName,\r\n\t\t\ttabIndex,\r\n\t\t\thighlightSelectedItem,\r\n\t\t\tselectedItemValue,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// Throws an error for some weird reason.\r\n\t\t// React.Children.only(children)\r\n\r\n\t\tif (React.Children.count(children) !== 1) {\r\n\t\t\tthrow new Error(`Each <List.Item/> must have a single child (and remove any whitespace).`)\r\n\t\t}\r\n\r\n\t\tconst isSelected = this.shouldCreateButton() && value === selectedItemValue\r\n\r\n\t\tconst properties =\r\n\t\t{\r\n\t\t\tref          : this.storeRef,\r\n\t\t\tonMouseDown  : this.onMouseDown,\r\n\t\t\tonClick      : this.onClick,\r\n\t\t\tonFocus      : this.onFocus,\r\n\t\t\tonBlur       : this.onBlur,\r\n\t\t\tclassName    : classNames\r\n\t\t\t(\r\n\t\t\t\tclassName,\r\n\t\t\t\t'rrui__list__item',\r\n\t\t\t\t{\r\n\t\t\t\t\t/* `--focused` modifier is deprecated, use `--focus` instead. */\r\n\t\t\t\t\t'rrui__list__item--focused'  : focused,\r\n\t\t\t\t\t'rrui__list__item--focus'    : focused,\r\n\t\t\t\t\t'rrui__list__item--selected' : isSelected && highlightSelectedItem,\r\n\t\t\t\t\t'rrui__list__item--disabled' : disabled,\r\n\t\t\t\t\t'rrui__list__item--divider'  : children.type === DividerType\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tif (id !== undefined) {\r\n\t\t\tproperties.id = id\r\n\t\t}\r\n\r\n\t\tif (tabIndex !== undefined) {\r\n\t\t\tproperties.tabIndex = tabIndex\r\n\t\t}\r\n\r\n\t\tlet ItemComponent\r\n\t\tlet itemChildren\r\n\t\tlet label\r\n\r\n\t\tif (this.shouldCreateButton())\r\n\t\t{\r\n\t\t\tItemComponent = 'button'\r\n\t\t\tlabel = getItemLabel(this)\r\n\t\t\tproperties.type = 'button'\r\n\t\t\tproperties.role = role\r\n\t\t\tproperties['aria-selected'] = isSelected\r\n\t\t\tproperties['aria-label'] = this.props.label || (typeof children !== 'string' && children && children.props ? children.props['aria-label'] : undefined)\r\n\t\t\tproperties.disabled = disabled\r\n\t\t\tproperties.className = classNames(\r\n\t\t\t\tproperties.className,\r\n\t\t\t\t'rrui__button-reset',\r\n\t\t\t\t'rrui__outline',\r\n\t\t\t\t'rrui__list__item--button'\r\n\t\t\t)\r\n\r\n\t\t\t// Replace `itemChildren` array with `<React.Fragment/>`\r\n\t\t\t// in some future when React >= 16.2.0 is common.\r\n\t\t\t//\r\n\t\t\t// <React.Fragment>\r\n\t\t\t// \t{/* Icon. */}\r\n\t\t\t// \t{ icon &&\r\n\t\t\t// \t\t<div className=\"rrui__list__item-icon\">\r\n\t\t\t// \t\t\t{ React.createElement(icon, { value, label }) }\r\n\t\t\t// \t\t</div>\r\n\t\t\t// \t}\r\n\t\t\t//\r\n\t\t\t// \t{/* Label (or content). */}\r\n\t\t\t// \t{ children }\r\n\t\t\t// </React.Fragment>\r\n\r\n\t\t\t// Label (or content).\r\n\t\t\titemChildren = React.Children.toArray(children)\r\n\r\n\t\t\t// Icon.\r\n\t\t\tif (icon)\r\n\t\t\t{\r\n\t\t\t\titemChildren.unshift((\r\n\t\t\t\t\t<span key=\"icon\" aria-hidden className=\"rrui__list__item-icon\">\r\n\t\t\t\t\t\t{ React.createElement(icon, { value, label }) }\r\n\t\t\t\t\t</span>\r\n\t\t\t\t))\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Don't overwrite `className` already defined on the `children`.\r\n\t\t\tproperties.className = classNames(properties.className, children.props && children.props.className)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<li\r\n\t\t\t\trole={this.shouldCreateButton() || children.type === DividerType ? 'presentation' : role}\r\n\t\t\t\taria-selected={this.shouldCreateButton() ? undefined : (role && role !== 'presentation' ? isSelected : undefined)}\r\n\t\t\t\taria-label={this.shouldCreateButton() ? undefined : label}\r\n\t\t\t\tclassName=\"rrui__list__list-item\">\r\n\t\t\t\t{ ItemComponent && React.createElement(ItemComponent, properties, itemChildren) }\r\n\t\t\t\t{ !ItemComponent && React.cloneElement(children, properties) }\r\n\t\t\t</li>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nList.Item = Item\r\n\r\n// Workaround for `react-hot-loader`.\r\n// https://github.com/gaearon/react-hot-loader#checking-element-types\r\nconst ItemType = <Item/>.type\r\n\r\nfunction haveItemsChanged(props, prevProps)\r\n{\r\n\tconst items     = React.Children.toArray(props.children)\r\n\tconst prevItems = React.Children.toArray(prevProps.children)\r\n\r\n\tif (items.length !== prevItems.length) {\r\n\t\treturn true\r\n\t}\r\n\r\n\tlet i = 0\r\n\twhile (i < items.length)\r\n\t{\r\n\t\tif (items[i].props.value !== prevItems[i].props.value) {\r\n\t\t\treturn true\r\n\t\t}\r\n\t\ti++\r\n\t}\r\n\r\n\treturn false\r\n}\r\n\r\nexport function findItemIndexByValue(value, children)\r\n{\r\n\tconst items = React.Children.toArray(children)\r\n\r\n\tlet i = 0\r\n\tfor (const item of items)\r\n\t{\r\n\t\tif (isSelectableItem(item) && item.props.value === value) {\r\n\t\t\treturn i\r\n\t\t}\r\n\t\ti++\r\n\t}\r\n}\r\n\r\nfunction findItemIndexByLabel(value, children)\r\n{\r\n\tconst items = React.Children.toArray(children)\r\n\r\n\tlet i = 0\r\n\tfor (const item of items)\r\n\t{\r\n\t\tif (isSelectableItem(item)) {\r\n\t\t\tconst itemLabel = getItemLabel(item)\r\n\t\t\tif (itemLabel && itemLabel.toLowerCase().indexOf(value.toLowerCase()) === 0) {\r\n\t\t\t\treturn i\r\n\t\t\t}\r\n\t\t}\r\n\t\ti++\r\n\t}\r\n}\r\n\r\nfunction getItemLabel(item) {\r\n\treturn item.props.label || (typeof item.props.children === 'string' ? item.props.children : undefined)\r\n}\r\n\r\nfunction isSelectableItem(item) {\r\n\treturn item.props.children && item.props.children.type !== DividerType\r\n}"]}